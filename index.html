<!DOCTYPE html>
<html lang="ru" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Школа фокусов «Абракадабра» | Воистину волшебный опыт</title>

  <meta name="description" content="Школа фокусов «Абракадабра». Последние технологии дизайна для создания воистину волшебного сайта. Учим уверенности, речи и артистизму." />
  <meta property="og:title" content="Школа фокусов «Абракадабра» | Premium Magic" />
  <meta property="og:description" content="Где ребёнок перестаёт быть незаметным и выходит на сцену. Почувствуйте магию." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="assets/images/og-image.png" /> <meta name="theme-color" content="#0a0a0a" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;800&family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  
  <style>
    :root {
      --bg: #0a0a0a;
      --bg-light: #1a1a1a;
      --gold: #e9c17b;
      --gold-dark: #b48c4f;
      --text: #e0e0e0;
      --text-muted: #a0a0a0;
      /* Fluid Typography */
      --font-size-hero: clamp(2.75rem, 10vw, 6rem); /* 44px -> 96px */
      --font-size-h2: clamp(2.25rem, 8vw, 4.5rem); /* 36px -> 72px */
      --font-size-h3: clamp(1.5rem, 5vw, 2.25rem); /* 24px -> 36px */
      --font-size-body: clamp(1rem, 2.5vw, 1.125rem); /* 16px -> 18px */
    }
    html {
      font-family: 'Montserrat', sans-serif;
      font-size: var(--font-size-body);
    }
    .font-display {
      font-family: 'Playfair Display', serif;
    }
    body {
      background-color: var(--bg);
      color: var(--text);
      overflow-x: hidden;
    }
    body.js-loaded.no-touch {
      cursor: none;
    }
    .magic-cursor, .cursor-trail { display: none; }
    body.js-loaded.no-touch .magic-cursor,
    body.js-loaded.no-touch .cursor-trail { display: block; }
    .magic-cursor {
      position: fixed; width: 20px; height: 20px; border: 2px solid var(--gold); border-radius: 50%; pointer-events: none; transform: translate(-50%, -50%); transition: width 0.3s, height 0.3s, background-color 0.3s; z-index: 9999;
    }
    .magic-cursor.hover { width: 40px; height: 40px; background-color: rgba(233, 193, 123, 0.2); }
    .cursor-trail {
      position: fixed; width: 6px; height: 6px; background-color: var(--gold); border-radius: 50%; pointer-events: none; transform: translate(-50%, -50%); z-index: 9998; transition: opacity 0.5s;
    }

    .hero-bg {
      background-color: var(--bg);
      background-image: radial-gradient(circle at 50% 50%, rgba(233, 193, 123, 0.05) 0%, rgba(233, 193, 123, 0) 70%);
      position: relative;
      overflow: hidden;
    }
    .btn-gold {
      background: linear-gradient(145deg, var(--gold), var(--gold-dark)); color: #1a0f22; font-weight: 700; border-radius: 50px; padding: 1rem 2.25rem; font-size: clamp(0.9rem, 2.5vw, 1rem); transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1); box-shadow: 0 4px 15px rgba(0,0,0,0.4), 0 0 0 1px var(--gold-dark);
    }
    .section-title { color: var(--gold); }
    .card {
      background-color: transparent; border: 1px solid rgba(233, 193, 123, 0.15); border-radius: 20px; transition: transform 0.4s, box-shadow 0.4s, border-color 0.4s, background-color 0.4s; position: relative; overflow: hidden;
    }
    .path-step {
      position: relative; padding-left: 40px; padding-bottom: 40px;
    }
    .path-line {
      position: absolute; left: 20px; top: 0; bottom: 0; width: 2px; background-color: var(--gold-dark); transform-origin: top; transform: scaleY(0);
    }
    .path-icon {
      position: absolute; left: 0; top: 0; width: 42px; height: 42px; border-radius: 50%; background-color: var(--bg); border: 2px solid var(--gold); display: flex; align-items: center; justify-content: center; transition: transform 0.4s, box-shadow 0.4s;
    }
    .centered-container {
      max-width: 800px; margin-left: auto; margin-right: auto; text-align: center;
    }
    [data-anim] {
      opacity: 0;
      transform: translateY(30px);
    }

    #webgl-bg {
      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: -1; display: none;
    }

    .custom-icon {
      filter: brightness(0) saturate(100%) invert(80%) sepia(21%) saturate(934%) hue-rotate(359deg) brightness(95%) contrast(86%);
    }
    .benefit-icon {
        filter: invert(71%) sepia(54%) saturate(413%) hue-rotate(85deg) brightness(105%) contrast(91%);
    }

    @media (hover: hover) and (pointer: fine) {
      .btn-gold:hover {
        transform: translateY(-4px) scale(1.05);
        box-shadow: 0 12px 40px rgba(233,193,123,0.35), 0 0 0 1px var(--gold);
      }
      .card:hover {
        transform: translateY(-10px) scale(1.03);
        box-shadow: 0 20px 50px rgba(0,0,0,0.6);
        border-color: rgba(233, 193, 123, 0.4);
        background-color: var(--bg-light);
      }
      .path-step:hover .path-icon {
        transform: scale(1.2) rotate(10deg);
        box-shadow: 0 0 20px var(--gold);
      }
    }
    @media (min-width: 768px) {
        .path-step { padding-left: 60px; padding-bottom: 50px; }
    }
  </style>
</head>
<body class="selection:bg-yellow-500/30">
  
  <div class="magic-cursor"></div>
  <canvas id="webgl-bg"></canvas>

  <header class="hero-bg min-h-screen flex items-center justify-center p-4">
    <div class="z-10 relative text-center">
      <div class="flex justify-center items-end mb-8 gap-4 hero-silhouettes" data-anim="hero-item">
         <svg class="w-20 h-20 sm:w-24 sm:h-24 text-white opacity-60" style="transform: scaleX(-1);" viewBox="0 0 24 24" fill="currentColor"><path d="M12,2A5,5 0 0,0 7,7A5,5 0 0,0 12,12A5,5 0 0,0 17,7A5,5 0 0,0 12,2M12,14C9.67,14 5,15.17 5,17.5V22H19V17.5C19,15.17 14.33,14 12,14Z" /></svg>
         <svg class="w-28 h-28 sm:w-32 sm:h-32 text-white opacity-80" viewBox="0 0 24 24" fill="currentColor"><path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16,14 20,16 20,17V20H4V17C4,16 8,14 12,14Z" /></svg>
         <svg class="w-20 h-20 sm:w-24 sm:h-24 text-white opacity-60" viewBox="0 0 24 24" fill="currentColor"><path d="M12,2A5,5 0 0,0 7,7A5,5 0 0,0 12,12A5,5 0 0,0 17,7A5,5 0 0,0 12,2M12,14C9.67,14 5,15.17 5,17.5V22H19V17.5C19,15.17 14.33,14 12,14Z" /></svg>
      </div>
      <h1 class="font-display section-title mb-6" style="font-size: var(--font-size-hero);" data-anim="gsap-chars">Школа фокусов «Абракадабра»</h1>
      <p class="text-lg md:text-xl text-text mb-10" data-anim="gsap-lines">Место, где дети становятся волшебниками</p>
      <div data-anim="gsap-lines">
        <a href="#cta" class="btn-gold inline-block magnetic-link">Записаться на бесплатное пробное занятие</a>
      </div>
    </div>
  </header>

  <main>
    <section class="py-20 md:py-28 px-4">
      <div class="centered-container">
          <h2 class="font-display section-title mb-12" style="font-size: var(--font-size-h2);" data-anim="gsap-chars">Почему фокусы, а не очередной кружок?</h2>
          <div class="grid md:grid-cols-2 gap-6 md:gap-8 text-left mb-12 md:mb-16">
            <div class="p-6 md:p-8 border border-red-500/20 rounded-2xl" data-anim="gsap-lines">
              <h3 class="font-display font-bold mb-4" style="font-size: var(--font-size-h3);">Привычный сценарий <span class="text-red-400">❌</span></h3>
              <p class="text-text-muted">Ребёнок в телефоне, боится выступать у доски. Новая игрушка забыта через неделю. Это путь в никуда.</p>
            </div>
            <div class="p-6 md:p-8 border border-green-500/20 rounded-2xl" data-anim="gsap-lines">
              <h3 class="font-display font-bold mb-4" style="font-size: var(--font-size-h3);">Новый результат! <span class="text-green-400">✅</span></h3>
              <p class="text-text-muted">Ребёнок на сцене, под аплодисменты. Он — звезда. Это не просто трюки, это инвестиция в личность.</p>
            </div>
          </div>
          <div class="grid sm:grid-cols-2 gap-6" data-anim="gsap-lines">
            <div class="card p-6 text-center"><p><strong>Игрушки</strong> ломаются. <br/><strong>Фокусы</strong> остаются навсегда.</p></div>
            <div class="card p-6 text-center"><p><strong>Кружки</strong> — это процесс. <br/><strong>Мы</strong> — это результат.</p></div>
            <div class="card p-6 text-center"><p><strong>Танцы</strong> — для всех. <br/><strong>Иллюзионисты</strong> — единицы.</p></div>
            <div class="card p-6 text-center"><p><strong>Телефон</strong> — пассивность. <br/><strong>Фокусы</strong> — лидерство.</p></div>
          </div>
      </div>
    </section>

    <section class="py-20 md:py-28 px-4 bg-bg-light">
      <div class="centered-container">
        <h2 class="font-display section-title mb-16" style="font-size: var(--font-size-h2);" data-anim="gsap-chars">Как мы превращаем детей в волшебников</h2>
        <div class="space-y-8 text-left">
          <div class="card flex items-start gap-4 md:gap-6 p-6 md:p-8" data-anim="gsap-lines">
            <span class="text-4xl md:text-5xl pt-1">🗓️</span>
            <div><h3 class="font-bold text-xl md:text-2xl">1 урок в неделю</h3><p class="text-text-muted">Два часа полного погружения в магию без усталости.</p></div>
          </div>
          <div class="card flex items-start gap-4 md:gap-6 p-6 md:p-8" data-anim="gsap-lines">
            <img src="assets/icons/envelope.png" alt="Secret Envelope" class="w-10 h-10 md:w-12 md:h-12 custom-icon mt-1">
            <div><h3 class="font-bold text-xl md:text-2xl">Секретный конверт</h3><p class="text-text-muted">Каждый месяц — новый реквизит и новая тайна, которую нужно освоить.</p></div>
          </div>
          <div class="card flex items-start gap-4 md:gap-6 p-6 md:p-8" data-anim="gsap-lines">
             <img src="assets/icons/medal.png" alt="Achievement Medal" class="w-10 h-10 md:w-12 md:h-12 custom-icon mt-1">
             <div><h3 class="font-bold text-xl md:text-2xl">Система ачивок</h3><p class="text-text-muted">Мотивация через награды за смелость, креативность и помощь друзьям.</p></div>
          </div>
          <div class="card flex items-start gap-4 md:gap-6 p-6 md:p-8" data-anim="gsap-lines">
            <img src="assets/icons/smartphone.png" alt="AR Diary" class="w-10 h-10 md:w-12 md:h-12 custom-icon mt-1">
            <div><h3 class="font-bold text-xl md:text-2xl">Оживающий AR-Дневник</h3><p class="text-text-muted">Наведите телефон — и смотрите эксклюзивный видеоурок от Мастера.</p></div>
          </div>
        </div>
      </div>
    </section>

    <section class="py-20 md:py-28 px-4">
        <div class="centered-container">
            <h2 class="font-display section-title mb-20" style="font-size: var(--font-size-h2);" data-anim="gsap-chars">Путь от Новичка до Мастера</h2>
            <div class="relative text-left" id="path-section">
                <div class="path-step" data-anim="gsap-lines">
                    <div class="path-line"></div>
                    <div class="path-icon"><img src="assets/icons/graduate.png" alt="Ученик" class="w-6 h-6 custom-icon"></div>
                    <h3 class="font-display font-bold text-gold mb-2" style="font-size: var(--font-size-h3);">Ученик (6 мес)</h3>
                    <p class="text-text-muted">6 трюков, шоу для родителей. 🎁 Профессиональная колода карт.</p>
                </div>
                <div class="path-step" data-anim="gsap-lines">
                    <div class="path-line"></div>
                    <div class="path-icon"><img src="assets/icons/diary.png" alt="Подмастерье" class="w-6 h-6 custom-icon"></div>
                    <h3 class="font-display font-bold text-gold mb-2" style="font-size: var(--font-size-h3);">Подмастерье (12 мес)</h3>
                    <p class="text-text-muted">Своя программа, большой концерт. 🎁 Фирменный реквизит.</p>
                </div>
                <div class="path-step" data-anim="gsap-lines">
                    <div class="path-line"></div>
                    <div class="path-icon"><img src="assets/icons/wizard-hat.png" alt="Маг" class="w-6 h-6 custom-icon"></div>
                    <h3 class="font-display font-bold text-gold mb-2" style="font-size: var(--font-size-h3);">Маг (18 мес)</h3>
                    <p class="text-text-muted">Новые педагоги, сценическое мастерство. 🎁 Особый реквизит.</p>
                </div>
                <div class="path-step" data-anim="gsap-lines">
                    <div class="path-line"></div>
                    <div class="path-icon"><img src="assets/icons/illusionist.png" alt="Иллюзионист" class="w-6 h-6 custom-icon"></div>
                    <h3 class="font-display font-bold text-gold mb-2" style="font-size: var(--font-size-h3);">Иллюзионист (24 мес)</h3>
                    <p class="text-text-muted">Личный номер, фестивали. 🎁 Элемент костюма, диплом.</p>
                </div>
                 <div class="path-step" style="padding-bottom: 0;" data-anim="gsap-lines">
                    <div class="path-line"></div>
                    <div class="path-icon"><img src="assets/icons/medal.png" alt="Мастер" class="w-6 h-6 custom-icon"></div>
                    <h3 class="font-display font-bold text-gold mb-2" style="font-size: var(--font-size-h3);">Мастер (36 мес)</h3>
                    <p class="text-text-muted">Ассистентство, участие в проф. шоу. 🎁 Кубок Мастера.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="py-20 md:py-28 px-4 bg-bg-light">
      <div class="centered-container">
        <h2 class="font-display section-title mb-16" style="font-size: var(--font-size-h2);" data-anim="gsap-chars">Результат, который вы увидите</h2>
        <div class="grid md:grid-cols-2 gap-12 text-left">
            <div data-anim="gsap-lines">
                <h3 class="font-display font-bold text-gold mb-6" style="font-size: var(--font-size-h3);">Что получает ребёнок</h3>
                <ul class="space-y-4">
                    <li class="flex items-start gap-3"><img src="assets/icons/checkmark.png" alt="Checkmark" class="w-5 h-5 mt-1 benefit-icon"> Непоколебимую уверенность в себе.</li>
                    <li class="flex items-start gap-3"><img src="assets/icons/checkmark.png" alt="Checkmark" class="w-5 h-5 mt-1 benefit-icon"> Артистизм и навыки фокусника.</li>
                    <li class="flex items-start gap-3"><img src="assets/icons/checkmark.png" alt="Checkmark" class="w-5 h-5 mt-1 benefit-icon"> Опыт реальных выступлений на сцене.</li>
                    <li class="flex items-start gap-3"><img src="assets/icons/checkmark.png" alt="Checkmark" class="w-5 h-5 mt-1 benefit-icon"> Перспективу стать частью большого шоу.</li>
                </ul>
            </div>
            <div data-anim="gsap-lines">
                <h3 class="font-display font-bold text-gold mb-6" style="font-size: var(--font-size-h3);">Что получают родители</h3>
                <ul class="space-y-4">
                    <li class="flex items-start gap-3"><img src="assets/icons/checkmark.png" alt="Checkmark" class="w-5 h-5 mt-1 benefit-icon"> Видимый результат каждый месяц.</li>
                    <li class="flex items-start gap-3"><img src="assets/icons/checkmark.png" alt="Checkmark" class="w-5 h-5 mt-1 benefit-icon"> Гордость за ребёнка на концертах.</li>
                    <li class="flex items-start gap-3"><img src="assets/icons/checkmark.png" alt="Checkmark" class="w-5 h-5 mt-1 benefit-icon"> Уникальный формат: геймификация + AR.</li>
                    <li class="flex items-start gap-3"><img src="assets/icons/checkmark.png" alt="Checkmark" class="w-5 h-5 mt-1 benefit-icon"> Чёткую систему развития на 3 года.</li>
                </ul>
            </div>
        </div>
      </div>
    </section>
    
    <section class="py-20 md:py-28 px-4">
      <div class="centered-container">
        <h2 class="font-display section-title mb-12" style="font-size: var(--font-size-h2);" data-anim="gsap-chars">Нам доверяют самое ценное</h2>
        <div class="grid md:grid-cols-2 gap-8 mb-12">
          <div class="card p-8" data-anim="gsap-lines">
            <p class="text-text-muted italic mb-4 text-left">"Сын был очень тихим, а теперь он — душа компании. Спасибо «Абракадабре» за эту трансформацию!"</p>
            <p class="font-bold text-right text-gold">— Анна, мама Максима (9 лет)</p>
          </div>
          <div class="card p-8" data-anim="gsap-lines">
            <p class="text-text-muted italic mb-4 text-left">"Лучшая инвестиция в развитие ребёнка. Вместо очередной игрушки мы подарили дочке навык на всю жизнь. Концерты — это что-то!"</p>
            <p class="font-bold text-right text-gold">— Виктор, папа Алисы (11 лет)</p>
          </div>
        </div>
      </div>
    </section>

    <section id="cta" class="py-20 md:py-28 px-4 bg-bg-light">
      <div class="centered-container">
        <h2 class="font-display section-title mb-6" style="font-size: var(--font-size-h2);" data-anim="gsap-chars">Сделайте первый шаг в мир магии!</h2>
        <p class="text-lg text-text-muted mb-10" data-anim="gsap-lines">Запишитесь на бесплатное пробное занятие. Мы познакомимся, покажем пару трюков и определим, подходит ли ребёнку наша система. <br/><strong class="text-gold">Места в группах строго ограничены.</strong></p>
        
        <div class="card p-8 max-w-md mx-auto" data-anim="gsap-lines">
            <form id="applicationForm">
                <div class="mb-4"><input type="text" placeholder="Имя родителя" required class="w-full p-4 bg-bg border border-yellow-500/30 rounded-lg text-white placeholder-text-muted focus:outline-none focus:border-gold transition-colors"></div>
                <div class="mb-4"><input type="tel" placeholder="Телефон" required class="w-full p-4 bg-bg border border-yellow-500/30 rounded-lg text-white placeholder-text-muted focus:outline-none focus:border-gold transition-colors"></div>
                <div class="mb-6"><input type="number" placeholder="Возраст ребёнка" required class="w-full p-4 bg-bg border border-yellow-500/30 rounded-lg text-white placeholder-text-muted focus:outline-none focus:border-gold transition-colors"></div>
                <button type="submit" class="btn-gold w-full magnetic-link">Отправить заявку</button>
            </form>
             <div id="form-success" class="hidden text-center"><h3 class="text-2xl font-bold text-gold mb-4">Спасибо!</h3><p class="text-text-muted">Ваша заявка принята. Мы скоро свяжемся с вами.</p></div>
        </div>
      </div>
    </section>
  </main>
  
  <footer class="py-20 text-center">
    <div class="centered-container">
        <p class="font-display section-title mb-6" style="font-size: var(--font-size-h2);" data-anim="gsap-chars">«Абракадабра»</p>
        <p class="text-text-muted text-lg max-w-md mx-auto mb-8" data-anim="gsap-lines">Школа, где ребёнок перестаёт быть незаметным и выходит на сцену.</p>
        <p class="text-sm text-gray-600" data-anim="gsap-lines">© 2025 Школа фокусов Дмитрия Костюка. Все права защищены.</p>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
        gsap.registerPlugin(ScrollTrigger);
        
        if (!isTouchDevice) {
            document.body.classList.add('no-touch', 'js-loaded');
            
            const cursor = document.querySelector('.magic-cursor');
            const trail = document.querySelector('.cursor-trail') || document.createElement('div');
            if (!trail.classList.contains('cursor-trail')) {
                trail.className = 'cursor-trail'; document.body.appendChild(trail);
            }
            let mouseX = 0, mouseY = 0;
            gsap.to({}, { duration: 0.016, repeat: -1, onRepeat: () => {
                gsap.set(cursor, { css: { left: mouseX, top: mouseY } });
                gsap.to(trail, { duration: 0.4, css: { left: mouseX, top: mouseY } });
            }});
            window.addEventListener('mousemove', e => { mouseX = e.clientX; mouseY = e.clientY; });
            document.querySelectorAll('a, button, .card, .path-icon').forEach(el => {
                el.addEventListener('mouseenter', () => cursor.classList.add('hover'));
                el.addEventListener('mouseleave', () => cursor.classList.remove('hover'));
            });

            if (typeof THREE !== 'undefined') {
                document.getElementById('webgl-bg').style.display = 'block';
                try {
                    const vertexShader = `varying vec2 vUv; void main() { vUv = uv; gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); }`;
                    const fragmentShader = `uniform float u_time; uniform vec2 u_mouse; varying vec2 vUv; float random (in vec2 _st) { return fract(sin(dot(_st.xy, vec2(12.9898,78.233))) * 43758.5453123); } float noise (in vec2 _st) { vec2 i = floor(_st); vec2 f = fract(_st); float a = random(i); float b = random(i + vec2(1.0, 0.0)); float c = random(i + vec2(0.0, 1.0)); float d = random(i + vec2(1.0, 1.0)); vec2 u = f * f * (3.0 - 2.0 * f); return mix(a, b, u.x) + (c - a)* u.y * (1.0 - u.x) + (d - b) * u.x * u.y; } #define NUM_OCTAVES 5; float fbm ( in vec2 _st) { float v = 0.0; float a = 0.5; vec2 shift = vec2(100.0); mat2 rot = mat2(cos(0.5), sin(0.5), -sin(0.5), cos(0.50)); for (int i = 0; i < NUM_OCTAVES; ++i) { v += a * noise(_st); _st = rot * _st * 2.0 + shift; a *= 0.5; } return v; } void main() { vec2 st = vUv * 3.0; st += u_mouse * 0.1; vec3 color = vec3(0.0); vec2 q = vec2(0.); q.x = fbm( st + 0.00*u_time); q.y = fbm( st + vec2(1.0)); vec2 r = vec2(0.); r.x = fbm( st + 1.0*q + vec2(1.7,9.2)+ 0.15*u_time ); r.y = fbm( st + 1.0*q + vec2(8.3,2.8)+ 0.126*u_time); float f = fbm(st+r); color = mix(vec3(0.06, 0.06, 0.06), vec3(0.1, 0.05, 0.05), clamp((f*f)*4.0,0.0,1.0)); color = mix(color, vec3(0.1, 0.0, 0.1), clamp(length(q),0.0,1.0)); color = mix(color, vec3(0.9, 0.6, 0.3), clamp(length(r.x),0.0,0.1)); gl_FragColor = vec4((f*f*f+.6*f*f+.5*f)*color, 1.); }`;
                    const scene = new THREE.Scene();
                    const camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);
                    const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('webgl-bg'), alpha: true });
                    renderer.setSize(window.innerWidth, window.innerHeight);
                    const uniforms = { u_time: { value: 0.0 }, u_mouse: { value: new THREE.Vector2(0, 0) } };
                    const material = new THREE.ShaderMaterial({ vertexShader, fragmentShader, uniforms });
                    const plane = new THREE.Mesh(new THREE.PlaneGeometry(2, 2), material);
                    scene.add(plane);
                    const clock = new THREE.Clock();
                    function animate() { requestAnimationFrame(animate); uniforms.u_time.value = clock.getElapsedTime(); renderer.render(scene, camera); }
                    animate();
                    window.addEventListener('resize', () => renderer.setSize(window.innerWidth, window.innerHeight));
                    window.addEventListener('mousemove', (e) => { uniforms.u_mouse.value.x = (e.clientX / window.innerWidth) * 2 - 1; uniforms.u_mouse.value.y = -(e.clientY / window.innerHeight) * 2 + 1; });
                } catch (e) { console.error("WebGL background failed:", e); }
            }

            gsap.utils.toArray('.magnetic-link').forEach(el => {
                el.addEventListener('mousemove', (e) => {
                    const { clientX, clientY } = e;
                    const { left, top, width, height } = el.getBoundingClientRect();
                    gsap.to(el, { x: (clientX - (left + width/2)) * 0.4, y: (clientY - (top + height/2)) * 0.4, duration: 0.5, ease: 'elastic.out(1, 0.5)' });
                });
                el.addEventListener('mouseleave', () => gsap.to(el, { x: 0, y: 0, duration: 0.7, ease: 'elastic.out(1, 0.5)' }));
            });
        }

        ScrollTrigger.batch("[data-anim]", {
            start: "top 85%",
            onEnter: batch => {
                batch.forEach((el, index) => {
                     const animType = el.dataset.anim;
                     const delay = index * (isTouchDevice ? 0.05 : 0.1); // Faster stagger on mobile
                     if (animType === 'gsap-chars') {
                        const chars = el.textContent.trim().split('').map(char => `<span>${char === ' ' ? '&nbsp;' : char}</span>`).join('');
                        el.innerHTML = chars;
                        gsap.fromTo(el.querySelectorAll('span'), { yPercent: 110, autoAlpha: 0 }, { autoAlpha: 1, yPercent: 0, rotationZ: 0, stagger: 0.02, duration: 1, ease: 'power3.out', delay: delay });
                     } else {
                        gsap.to(el, { autoAlpha: 1, y: 0, duration: 1, ease: 'power3.out', delay: delay });
                     }
                });
            },
            once: true
        });
        
        gsap.utils.toArray('.path-line').forEach(line => {
            gsap.from(line, { scaleY: 0, scrollTrigger: { trigger: line.parentElement, start: "top center", end: "bottom center", scrub: 0.5 }});
        });
        
        const form = document.getElementById('applicationForm');
        const successMessage = document.getElementById('form-success');
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            if (form.checkValidity()) { form.style.display = 'none'; successMessage.style.display = 'block'; } 
            else { form.reportValidity(); }
        });
    });
  </script>

</body>
</html>
